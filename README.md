# Projet Oracle – Délibérations & Votes

##  Objectif du projet

Ce projet est né dans le cadre d’un **projet DevOps personnel**, avec un objectif clair : **mettre en place une base de données Oracle fonctionnelle**, même en partant de zéro, et démontrer que l'on peut **installer, manipuler et documenter** des outils complexes en toute autonomie.

Il s’agissait pour moi d’un **terrain d’apprentissage** autour d’Oracle Database XE, de Docker, du SQL, et du versioning Git.

---

##  Ce que j’ai appris et démontré

✅ Installer et configurer Oracle XE dans un conteneur Docker  
✅ Me connecter à la base via le terminal et via une interface graphique (DBeaver)  
✅ Créer un utilisateur Oracle (`delibuser`) avec ses droits  
✅ Écrire un script SQL complet (`init_oracle.sql`)  
✅ Créer des tables relationnelles (avec clés primaires/étrangères)  
✅ Lancer ce script depuis l’intérieur du conteneur  
✅ Rafraîchir le schéma et vérifier les données via DBeaver  
✅ Réaliser un début de **dump/sauvegarde** SQL  
✅ Mettre tout ça sous Git avec un commit clair et une structure propre  
✅ Résoudre de nombreuses erreurs (droits, utilisateurs, ports, fichiers manquants, erreurs SQL)

---


##  Installation & Lancement

### 1. Lancer Oracle via Docker

```bash
docker-compose up -d


##  Structure du projet

├── docker-compose.yml # Lancement du conteneur Oracle
├── init_oracle.sql # Script SQL de création des objets Oracle
├── deliberations.csv # Exemple de données importables
├── .gitignore # Fichiers exclus du dépôt Git
└── README.md # Documentation du projet


## Technologies utilisées

- **Oracle Database 21c XE** (conteneur Docker)
- **SQL** (DDL & DML)
- **Docker & Docker Compose**
- **Git + GitHub**
- **DBeaver** (optionnel – interface graphique pour Oracle)

---

##  Objets créés

### 1. Schéma Oracle

- Utilisateur : `delibuser`
- Mot de passe : `Delib2025`

> ⚠️ L’utilisateur est à créer une seule fois. Ne pas relancer le script s’il existe déjà.

---

### 2. Table `citoyens`

```sql
CREATE TABLE delibuser.citoyens (
    id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    nom VARCHAR2(100),
    prenom VARCHAR2(100),
    date_naissance DATE,
    ville VARCHAR2(100)
);

docker exec -it oracle_xe bash
sqlplus sys/MySecurePassword123@localhost:1521/XEPDB1 as sysdba

###### Utilisateur Oracle
sql
Copier
Modifier
CREATE USER delibuser IDENTIFIED BY Delib2025;
GRANT CONNECT, RESOURCE TO delibuser;


##Table citoyens
sql
Copier
Modifier
CREATE TABLE delibuser.citoyens (
    id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    nom VARCHAR2(100),
    prenom VARCHAR2(100),
    date_naissance DATE,
    ville VARCHAR2(100)
);

##Table votes
sql
Copier
Modifier
CREATE TABLE delibuser.votes (
    id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    id_citoyen NUMBER,
    id_deliberation NUMBER,
    vote VARCHAR2(10),
    FOREIGN KEY (id_citoyen) REFERENCES delibuser.citoyens(id),
    FOREIGN KEY (id_deliberation) REFERENCES delibuser.deliberations(id)
);

## Interface graphique (DBeaver)
-Une fois Oracle lancé et les tables créées, j’ai utilisé DBeaver pour :
-Me connecter à Oracle en JDBC
-Visualiser le schéma delibuser
-Rafraîchir les objets (tables, clés, contraintes)
-Exécuter manuellement des requêtes SQL (SELECT, INSERT…)

 ##Sauvegarde (Dump SQL)

J’ai également commencé à intégrer une logique de sauvegarde (dump) :

bash
Copier
Modifier
# (à améliorer dans une version future)
docker exec -it oracle_xe bash
expdp delibuser/Delib2025 directory=data_pump_dir dumpfile=delib.dmp logfile=export.log


##Difficultés rencontrées (et surmontées)

Droits d’accès refusés sur certaines arborescences → résolu avec .gitignore et chmod
ORA-01918: user 'DELIBUSER' does not exist → j’ai appris à vérifier le schéma actif
Problèmes de conflits de noms sur les objets Oracle → supprimé manuellement les objets existants
Permissions Git bloquantes sur certains dossiers Oracle → j’ai restructuré le dépôt
Découverte complète de DBeaver : j’ai appris à rafraîchir les schémas et trouver les menus utiles



 #### Bilan
Je n’étais pas expert Oracle, mais ce projet m’a permis de :

Me confronter à un environnement technique que je ne connaissais pas

Prouver ma capacité d’adaptation

Construire une solution de A à Z

Être autonome sur la documentation, la résolution d’erreurs, et l'intégration dans un dépôt Git propre




